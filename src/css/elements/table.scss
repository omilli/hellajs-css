@use "../theme/colors" as colors;
@use "./theme/table.theme" as theme;

// Base Table Styling
table {
  display: var(--table-display, #{theme.$table-display});
  width: var(--table-width, #{theme.$table-width});
  margin: var(--table-margin, #{theme.$table-margin});
  border-collapse: var(
    --table-border-collapse,
    #{theme.$table-border-collapse}
  );
  border-spacing: var(--table-border-spacing, #{theme.$table-border-spacing});
  background: var(--table-background, #{theme.$table-background});
}

thead {
  // Instead of display: none, clip it for accessibility
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

// Table Row
tr {
  display: var(--table-row-display, #{theme.$table-row-display});
  margin: var(--table-row-margin, #{theme.$table-row-margin});
}

// Table Header
th {
  display: var(--table-header-display, #{theme.$table-header-display});
  padding: var(--table-header-padding, #{theme.$table-cell-padding});
  text-align: var(--table-header-align, #{theme.$table-cell-text-align});
  vertical-align: var(
    --table-header-vertical-align,
    #{theme.$table-cell-vertical-align}
  );
  font-weight: var(
    --table-header-font-weight,
    #{theme.$table-header-font-weight}
  );
  text-transform: var(
    --table-header-text-transform,
    #{theme.$table-header-text-transform}
  );
  border-bottom: var(
      --table-header-border-width,
      #{theme.$table-header-border-width}
    )
    var(--table-border-style, #{theme.$table-border-style})
    var(--table-border-color, #{colors.color("border")});
  color: var(--table-header-color, #{colors.color("heading")});
}

// Table Cells
td {
  display: var(--table-cell-display, #{theme.$table-cell-display});
  padding: var(--table-cell-padding, #{theme.$table-cell-padding});
  text-align: var(--table-cell-align, #{theme.$table-cell-text-align});
  vertical-align: var(
    --table-cell-vertical-align,
    #{theme.$table-cell-vertical-align}
  );
  line-height: var(--table-cell-line-height, #{theme.$table-cell-line-height});
  border-bottom: var(--table-border-width, #{theme.$table-border-width})
    var(--table-border-style, #{theme.$table-border-style})
    var(--table-border-color, #{colors.color("border")});
}

// Responsive Table
@media (max-width: #{theme.$table-stack-breakpoint}) {
  table {
    display: var(--table-mobile-display, #{theme.$table-mobile-display});
    width: var(--table-mobile-width, #{theme.$table-mobile-width});
    border: 0;
  }

  thead {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  tbody {
    width: var(--table-mobile-width, #{theme.$table-mobile-width});
    display: var(--table-mobile-display, #{theme.$table-mobile-display});
  }

  tr {
    display: var(
      --table-row-mobile-display,
      #{theme.$table-row-mobile-display}
    );
    margin-bottom: var(
      --table-row-mobile-margin,
      #{theme.$table-row-mobile-margin}
    );
    border-radius: var(
      --table-row-border-radius,
      #{theme.$table-row-border-radius}
    );
    background: var(--table-row-background, #{colors.color("background")});
    box-shadow: var(--table-card-shadow, #{theme.$table-card-shadow})
      var(--table-shadow-color, #{colors.color("shadow")});
    border: var(--table-row-border-width, #{theme.$table-border-width})
      var(--table-row-border-style, #{theme.$table-border-style})
      var(--table-row-border-color, #{colors.color("border")});
  }

  td {
    position: relative;
    display: var(--table-cell-mobile-display, block);
    padding: var(--table-mobile-padding, #{theme.$table-mobile-padding});
    padding-left: var(--table-mobile-label-width, 50%);
    text-align: var(--table-cell-mobile-align, left);
    min-height: var(--table-cell-mobile-min-height, 2.5rem);

    &::before {
      content: attr(data-label);
      position: absolute;
      left: var(--table-label-left, #{theme.$table-cell-padding});
      top: var(--table-label-top, #{theme.$table-cell-padding});
      width: var(--table-label-width, calc(50% - #{theme.$table-cell-padding}));
      padding-right: var(--table-label-padding, 0.5rem);
      font-weight: var(
        --table-label-font-weight,
        #{theme.$table-header-font-weight}
      );
      text-transform: var(
        --table-label-text-transform,
        #{theme.$table-header-text-transform}
      );
      text-align: var(--table-label-align, left);
      color: var(--table-label-color, #{colors.color("heading")});
    }

    &:empty {
      display: none;
    }
  }
}

// Small screen optimizations
@media (max-width: #{theme.$table-small-breakpoint}) {
  td {
    padding: var(--table-mobile-small-padding, #{theme.$table-mobile-padding});
    padding-left: var(--table-cell-padding, #{theme.$table-cell-padding});
    text-align: var(--table-cell-mobile-small-align, left);

    &::before {
      position: relative;
      display: block;
      left: auto;
      top: auto;
      width: 100%;
      margin-bottom: var(--table-label-margin, 0.25rem);
    }
  }
}
