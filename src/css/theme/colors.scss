// Core Theme Variables
// Default theme colors - can be overridden
$colors-default: (
  "background": #ffffff,
  "text": #333333,
  "heading": #222222,
  "border": #dddddd,
  "link": #0066cc,
  "link-hover": #004499,
  "muted": #666666,
  "accent": #0066cc,
  "blockquote-bg": #f9f9f9,
  "code-bg": #f5f5f5,
  "shadow": rgba(0, 0, 0, 0.1),
) !default;

// Light mode variables - extends default
$colors: $colors-default !default;

// Dark mode variables
$colors-dark: (
  "background": #222222,
  "text": #eeeeee,
  "heading": #ffffff,
  "border": #444444,
  "link": #4d9cff,
  "link-hover": #77b5ff,
  "muted": #aaaaaa,
  "accent": #4d9cff,
  "blockquote-bg": #333333,
  "code-bg": #333333,
) !default;

// CSS Variables Generation System
:root {
  // Generate default/light mode variables
  @each $key, $value in $colors {
    --color-#{$key}: #{$value};
  }

  // Allow for theme toggle via attribute
  &[data-theme="dark"] {
    @each $key, $value in $colors-dark {
      --color-#{$key}: #{$value};
    }
  }

  // Respect user system preference if no theme is explicitly set
  @media (prefers-color-scheme: dark) {
    &:not([data-theme]) {
      @each $key, $value in $colors-dark {
        --color-#{$key}: #{$value};
      }
    }
  }
}

@function color($key) {
  @return var(--color-#{$key});
}
