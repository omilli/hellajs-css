// Core Theme Variables
// Default theme colors - can be overridden
$colors-default: (
  "background": #ffffff,
  "text": oklch(0.129 0.042 264.695),
  "heading": #222222,
  "border": #dddddd,
  "link": oklch(0.488 0.243 264.376),
  "link-hover": oklch(0.424 0.199 265.638),
  "muted": #666666,
  "accent": oklch(0.424 0.199 265.638),
  "blockquote-bg": #f9f9f9,
  "code-bg": #f5f5f5,
  "shadow": rgba(0, 0, 0, 0.1),
) !default;

// Light mode variables - extends default
$colors: $colors-default !default;

// Dark mode variables
$colors-dark: (
  "background": oklch(0.129 0.042 264.695),
  "text": #eeeeee,
  "heading": #ffffff,
  "border": #444444,
  "link": oklch(0.809 0.105 251.813),
  "link-hover": oklch(0.707 0.165 254.624),
  "muted": #aaaaaa,
  "accent": oklch(0.707 0.165 254.624),
  "blockquote-bg": oklch(0.208 0.042 265.755),
  "code-bg": oklch(0.208 0.042 265.755),
) !default;

// CSS Variables Generation System
:root {
  // Generate default/light mode variables
  @each $key, $value in $colors {
    --color-#{$key}: #{$value};
  }

  // Allow for theme toggle via attribute
  &[data-theme="dark"] {
    @each $key, $value in $colors-dark {
      --color-#{$key}: #{$value};
    }
  }

  // Respect user system preference if no theme is explicitly set
  @media (prefers-color-scheme: dark) {
    &:not([data-theme]) {
      @each $key, $value in $colors-dark {
        --color-#{$key}: #{$value};
      }
    }
  }
}

@function color($key) {
  @return var(--color-#{$key});
}
